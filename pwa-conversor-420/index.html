<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0f172a">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <title>Conversor 4–20 mA ↔ UE • Vida de Instrumentista</title>
  <style>
    :root{--bg:#0f172a;--card:#ffffff;--muted:#64748b;--text:#0f172a;--accent:#0f172a}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:#f8fafc;color:var(--text)}
    .wrap{max-width:960px;margin:24px auto;padding:0 16px}
    .head{margin-bottom:16px}
    .title{font-size:clamp(20px,3vw,28px);font-weight:800;margin:0}
    .subtitle{color:var(--muted);margin:6px 0 0 0}
    .card{background:var(--card);border-radius:16px;box-shadow:0 6px 24px rgba(2,6,23,0.06);padding:16px}
    .grid{display:grid;gap:16px}
    @media(min-width:860px){.grid{grid-template-columns:320px 1fr}}
    label{font-size:12px;color:var(--muted)}
    input{width:100%;padding:10px 12px;border:1px solid #e2e8f0;border-radius:12px;font-size:14px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .btns{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    .btn{padding:10px 14px;border:1px solid #e2e8f0;border-radius:12px;background:#fff;cursor:pointer}
    .btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .kpi{border:1px solid #e2e8f0;border-radius:12px;padding:12px}
    .kpi small{display:block;color:var(--muted);text-transform:uppercase;font-size:11px}
    .kpi .val{font-size:22px;font-weight:800}
    .hint{font-size:12px;color:var(--muted)}
    .footer{margin-top:20px;color:var(--muted);font-size:12px}
    .danger{color:#b91c1c}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="head">
      <h1 class="title">Conversor 4–20 mA ↔ Unidade de Engenharia</h1>
      <p class="subtitle">Simples, direto, offline. Ideal para campo e comissionamento.</p>
    </header>

    <div class="grid">
      <section class="card">
        <h3 style="margin:0 0 12px 0">Configuração</h3>
        <label>Unidade (rótulo)</label>
        <input id="label" value="%">

        <div class="row" style="margin-top:10px">
          <div>
            <label>EU mín</label>
            <input id="euMin" type="number" value="0">
          </div>
          <div>
            <label>EU máx</label>
            <input id="euMax" type="number" value="100">
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div>
            <label>mA mín</label>
            <input id="mALo" type="number" value="4">
          </div>
          <div>
            <label>mA máx</label>
            <input id="mAHi" type="number" value="20">
          </div>
        </div>

        <div class="hint" style="margin-top:10px">
          Fórmulas: mA = mAmin + (EU − EUmin)/EUspan · mAspan ·· e ·· EU = EUmin + (mA − mAmin)/mAspan · EUspan
        </div>
      </section>

      <section class="card">
        <div class="btns">
          <button id="btnEU" class="btn active">EU → mA</button>
          <button id="btnMA" class="btn">mA → EU</button>
          <button id="btnCopy" class="btn" title="Copiar resultado">Copiar</button>
          <span id="copyStatus" class="hint"></span>
        </div>

        <div id="modeEU" class="mode">
          <div>
            <label>Valor de engenharia (<span id="lblUnit">%</span>)</label>
            <input id="engVal" type="number" value="50">
            <div id="warnEU" class="hint danger" style="display:none;margin-top:6px"></div>
          </div>

          <div class="row" style="margin-top:12px">
            <div class="kpi">
              <small>% do span</small>
              <div class="val" id="pctEU">—</div>
            </div>
            <div class="kpi">
              <small>Corrente</small>
              <div class="val" id="mAfromEU">—</div>
              <div class="hint" id="mAfromEUclamp">—</div>
            </div>
          </div>
        </div>

        <div id="modeMA" class="mode" style="display:none">
          <div>
            <label>Corrente (mA)</label>
            <input id="mAVal" type="number" value="12">
            <div id="warnMA" class="hint danger" style="display:none;margin-top:6px"></div>
          </div>

          <div class="row" style="margin-top:12px">
            <div class="kpi">
              <small>% do span</small>
              <div class="val" id="pctMA">—</div>
            </div>
            <div class="kpi">
              <small>Valor de engenharia</small>
              <div class="val" id="EUfromMA">—</div>
              <div class="hint" id="EUfromMAclamp">—</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="footer">
      Vida de Instrumentista • PWA • Para instalar: menu do navegador → “Adicionar à Tela Inicial”.
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
</body>
</html>
